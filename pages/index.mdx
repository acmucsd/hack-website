import HomePage from '../src/homepage';
import { useSSG } from 'nextra/ssg';
import { getAllHackEvents, getHackEvent } from '../src/api/events_api';

export async function getStaticProps() {
  const uuids = ["e3913d1c-360d-4935-8ed9-ab988c139f13", "590ad9f9-2dff-4372-979d-6bb540e02138"]
  const promises = uuids.map(uuid => getHackEvent(uuid))
  const past_events = await Promise.all(promises);
  const future_events = await getAllHackEvents('future');

  return {
    props: {
        ssg: {
            past_events: past_events || [],
            future_events: future_events || []
        }
    },
    revalidate: 1 * 60 * 60, // once every hour (in seconds)
  };
}

<HomePage past_events={useSSG().past_events} future_events={useSSG().future_events} />
